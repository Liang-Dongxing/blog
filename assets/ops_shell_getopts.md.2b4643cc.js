import{_ as s,o as a,c as n,V as l}from"./chunks/framework.8ad3a56f.js";const F=JSON.parse('{"title":"shell 脚本之参数传递的两种方式","description":"","frontmatter":{},"headers":[],"relativePath":"ops/shell/getopts.md","filePath":"ops/shell/getopts.md","lastUpdated":1668512834000}'),p={name:"ops/shell/getopts.md"},o=l(`<h1 id="shell-脚本之参数传递的两种方式" tabindex="-1">shell 脚本之参数传递的两种方式 <a class="header-anchor" href="#shell-脚本之参数传递的两种方式" aria-label="Permalink to &quot;shell 脚本之参数传递的两种方式&quot;">​</a></h1><h2 id="位置参数" tabindex="-1">位置参数 <a class="header-anchor" href="#位置参数" aria-label="Permalink to &quot;位置参数&quot;">​</a></h2><h3 id="示例1" tabindex="-1">示例1 <a class="header-anchor" href="#示例1" aria-label="Permalink to &quot;示例1&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Shell 传递参数实例！</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">执行的文件名：</span><span style="color:#A6ACCD;font-style:italic;">$0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">第一个参数为：</span><span style="color:#A6ACCD;font-style:italic;">$1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">第二个参数为：</span><span style="color:#A6ACCD;font-style:italic;">$2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">第三个参数为：</span><span style="color:#A6ACCD;font-style:italic;">$3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>结果</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">./test.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Shell</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">传递参数实例！</span></span>
<span class="line"><span style="color:#FFCB6B;">执行的文件名：./test.sh</span></span>
<span class="line"><span style="color:#FFCB6B;">第一个参数为：1</span></span>
<span class="line"><span style="color:#FFCB6B;">第二个参数为：2</span></span>
<span class="line"><span style="color:#FFCB6B;">第三个参数为：3</span></span></code></pre></div><h3 id="示例2" tabindex="-1">示例2 <a class="header-anchor" href="#示例2" aria-label="Permalink to &quot;示例2&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">$0</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 当前脚本的文件名（间接运行时还包括绝对路径）。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $n    </span><span style="color:#676E95;font-style:italic;"># 传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是 $1 。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $#    </span><span style="color:#676E95;font-style:italic;"># 传递给脚本或函数的参数个数。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $*    </span><span style="color:#676E95;font-style:italic;"># 传递给脚本或函数的所有参数。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">$@</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 传递给脚本或函数的所有参数。被双引号 (&quot; &quot;) 包含时，与 $* 不同，下面将会讲到。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $?    </span><span style="color:#676E95;font-style:italic;"># 上个命令的退出状态，或函数的返回值。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $$    </span><span style="color:#676E95;font-style:italic;"># 当前 Shell 进程 ID。对于 Shell 脚本，就是这些脚本所在的进程 ID。</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $_    </span><span style="color:#676E95;font-style:italic;"># 上一个命令的最后一个参数</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $!    </span><span style="color:#676E95;font-style:italic;"># 后台运行的最后一个进程的 ID 号</span></span></code></pre></div><p>结果</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./test.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">./test.sh</span><span style="color:#A6ACCD;">                      </span><span style="color:#676E95;font-style:italic;"># $0</span></span>
<span class="line"><span style="color:#A6ACCD;">                               </span><span style="color:#676E95;font-style:italic;"># $n</span></span>
<span class="line"><span style="color:#FFCB6B;">5</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;"># $#</span></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test4</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># $*</span></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test4</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># $@</span></span>
<span class="line"><span style="color:#FFCB6B;">0</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;"># $?</span></span>
<span class="line"><span style="color:#FFCB6B;">12305</span><span style="color:#A6ACCD;">                          </span><span style="color:#676E95;font-style:italic;"># $$</span></span>
<span class="line"><span style="color:#FFCB6B;">12305</span><span style="color:#A6ACCD;">                          </span><span style="color:#676E95;font-style:italic;"># $_</span></span>
<span class="line"><span style="color:#A6ACCD;">                               </span><span style="color:#676E95;font-style:italic;"># $!</span></span></code></pre></div><h2 id="getopts" tabindex="-1">getopts <a class="header-anchor" href="#getopts" aria-label="Permalink to &quot;getopts&quot;">​</a></h2><p>语法格式：getopts [option[:]] [DESCPRITION] VARIABLE option：表示为某个脚本可以使用的选项 &quot;:&quot;：如果某个选项（option）后面出现了冒号（&quot;:&quot;），则表示这个选项后面可以接参数（即一段描述信息DESCPRITION） VARIABLE：表示将某个选项保存在变量VARIABLE中</p><h3 id="示例1-1" tabindex="-1">示例1 <a class="header-anchor" href="#示例1-1" aria-label="Permalink to &quot;示例1&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getopts</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:a:b:c:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">opt</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#A6ACCD;"> $opt </span><span style="color:#89DDFF;font-style:italic;">in</span></span>
<span class="line"><span style="color:#A6ACCD;">        a</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数a的值</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        b</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数b的值</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        c</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数c的值</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">?)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">未知参数</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">esac</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">done</span></span></code></pre></div><p>结果</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./test.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-b</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-c</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#在shell中的输出</span></span>
<span class="line"><span style="color:#FFCB6B;">参数a的值1</span></span>
<span class="line"><span style="color:#FFCB6B;">参数b的值2</span></span>
<span class="line"><span style="color:#FFCB6B;">参数c的值3</span></span></code></pre></div><h3 id="示例2-1" tabindex="-1">示例2 <a class="header-anchor" href="#示例2-1" aria-label="Permalink to &quot;示例2&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getopts</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:a:b:c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">opt</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#A6ACCD;"> $opt </span><span style="color:#89DDFF;font-style:italic;">in</span></span>
<span class="line"><span style="color:#A6ACCD;">        a</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数a的值</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        b</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数b的值</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        c</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数c的值</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">?)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">未知参数</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">esac</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">done</span></span></code></pre></div><p>结果</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./test.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-b</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-c</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#在shell中的输出</span></span>
<span class="line"><span style="color:#FFCB6B;">参数a的值1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a参数位置为1，是处理带值选项参数</span></span>
<span class="line"><span style="color:#FFCB6B;">参数b的值2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-b参数位置为2，是处理带值选项参数</span></span>
<span class="line"><span style="color:#FFCB6B;">参数c的值</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-c参数位置为3，是处理开关型变量</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">即后面没有跟参数</span><span style="color:#89DDFF;">)</span></span></code></pre></div>`,20),e=[o];function t(c,r,y,C,A,D){return a(),n("div",null,e)}const h=s(p,[["render",t]]);export{F as __pageData,h as default};
